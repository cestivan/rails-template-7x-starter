import { Controller } from "@hotwired/stimulus"
import Rails from "@rails/ujs"

export default class extends Controller<HTMLElement> {
  static targets = [
    // Add your targets here, e.g.:
    // "messageInput", "messagesContainer", "sendButton"
  ]

  static values = {
    // Add your values here, e.g.:
    // roomId: String,
    // userId: String
  }

  // Declare your targets and values
  // declare readonly messageInputTarget: HTMLInputElement
  // declare readonly messagesContainerTarget: HTMLElement
  // declare readonly roomIdValue: string

  connect(): void {
    console.log("<%= class_name.camelize %> connected")
  }

  disconnect(): void {
    console.log("<%= class_name.camelize %> disconnected")
  }

  // Add your action methods here
  // Example:
  // click(): void {
  //   console.log("Button clicked")
  // }

  // ðŸ“¤ EXAMPLE: Submit form data via Rails.ajax
  // submitForm(event: Event): void {
  //   event.preventDefault()
  //   const form = event.target as HTMLFormElement
  //
  //   Rails.ajax({
  //     type: form.method || 'POST',
  //     url: form.action,
  //     data: new FormData(form),
  //     beforeSend: (xhr: XMLHttpRequest) => {
  //       xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
  //       return true
  //     },
  //     success: (data: any) => {
  //       // Update UI after successful submission
  //       console.log('Form submitted successfully:', data)
  //     },
  //     error: (xhr: XMLHttpRequest) => {
  //       // Update UI to show error message
  //       console.error('Form submission failed:', xhr.responseText)
  //     }
  //   })
  // }
}
